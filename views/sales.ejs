<!DOCTYPE html>
<html>
<%include partial/head.ejs%>

  <body>
    <%include partial/navbar.ejs%>
      <%include partial/dashboard.ejs%>

        <div class="table">
          <table class="main-table">
            <h3>Penjualan</h3>
            <p><a href="/sales/product">Produk</a></p>
            <p><a href="/sales">Pelanggan</a></p>
            <tr>
              <th>No</th>
              <th>Nama Pelanggan</th>
              <th>Nomor Transaksi</th>
              <th>Tanggal Transaksi</th>
              <th>Nominal Transaksi</th>
              <th>Total</th>

            </tr>
            <%sales.forEach((data, i)=>{%>
              <%if(data.UserProducts.length != 0){%>
                <tr>
                  <td><%=i+1%></td>
                  <td>
                    <%=data.name%>
                  </td>
                  <td>
                    <% data.UserProducts.forEach((hasil, i)=> { %>
                        <%=i+1%>. <%= hasil.Transaction.nota%><br>
                    <%}) %>
                  </td>
                  <td>
                      <% data.UserProducts.forEach((hasil, i)=> { %>
                          <%=i+1%>. <%= hasil.Transaction.createdAt%><br>
                        <%}) %>
                  </td>
                  <td>
                      <% data.UserProducts.forEach((hasil,i)=> { %>
                          <%=i+1%>. <%= hasil.Transaction.total%><br>
                        <%}) %>
                  </td>
                  <% let jumlah = 0;
                                data.UserProducts.forEach((hasil)=> {
                                    jumlah +=Number(hasil.Transaction.total)
                                    }) %>
                    <td>
                      <%= jumlah%>
                    </td>


                </tr>
                <%}%>
                  <%})%>
          </table>

        </div>
  </body>

</html>
